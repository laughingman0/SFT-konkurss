/* -------------------------------------------------------
   TeacherBro — FIXED & IMPROVED STYLESHEET
   ------------------------------------------------------- */

/* Theme variables */
:root{
  --bg: linear-gradient(145deg,#3b3d47,#202127);
  --bg-fixed: #2b2c30;
  --card: rgba(255,255,255,0.06);
  --card-2: rgba(255,255,255,0.05);
  --input-bg: rgba(255,255,255,0.12);
  --input-border: rgba(255,255,255,0.28);
  --button-bg: linear-gradient(135deg,#73d6ff,#7fffd4);
  --button-bg-hover: linear-gradient(135deg,#5ec9ff,#6ef5c8);
  --text: #fff;
  --muted: rgba(255,255,255,0.75);
  --placeholder: #d6d6d6;
}

/* Light theme */
.light{
  --bg: linear-gradient(145deg,#ffffff,#dfe7ff);
  --bg-fixed: rgba(255,255,255,0.92);
  --card: rgba(0,0,0,0.05);
  --card-2: rgba(0,0,0,0.05);
  --input-bg: rgba(0,0,0,0.06);
  --input-border: rgba(0,0,0,0.18);
  --text: #222;
  --muted: rgba(0,0,0,0.7);
  --button-bg: linear-gradient(135deg,#4da8ff,#00e2a9);
  --button-bg-hover: linear-gradient(135deg,#3399ff,#00d79c);
  --placeholder: #555;
}

/* Global */
*{box-sizing:border-box}
html,body{
  height:100%;margin:0;padding:0;
  font-family:"Inter",Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  overflow-x:hidden;
}
body{
  background-repeat:no-repeat;
  background-attachment:fixed;
  background-size:cover;
  background-position:center;
}

.container{
  width:100%;max-width:1100px;
  margin:0 auto;padding:1rem;
}

/* -------------------------------------------------------
   HEADER FIXES - NO SHAKING
   ------------------------------------------------------- */
.site-header{
  padding-top:42px;
  padding-bottom:14px;
  background:var(--bg-fixed);
  border-radius:14px;
  margin-bottom:14px;
  box-shadow:0 4px 14px rgba(0,0,0,0.25);
  text-align:center;
}

/* FIXED: h4 now scales properly on mobile */
.site-header h4{
  margin:0;
  font-weight:700;
  font-size:clamp(1.4rem, 6vw, 2.2rem);
  color:var(--text);
  text-shadow:0 0 12px rgba(255,255,255,0.38);
}

/* FIX FOR TYPEWRITER SHAKING */
.site-header h1 {
  min-height: 80px; /* Fixed height that fits all messages */
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 6px 0 4px;
  padding: 10px 0;
  font-size: clamp(1rem, 4.5vw, 1.6rem);
  font-weight: 600;
  line-height: 1.15;
}

/* -------------------------------------------------------
   AUTO-TYPE TEXT — NO SHAKING
   ------------------------------------------------------- */
.auto-type{
  display: inline-block;
  text-align: center;
  line-height: 1.4;
  border-right: 2px solid var(--text);
  animation: blink .7s step-end infinite;
  white-space: normal;
  word-break: break-word;
  max-width: 100%;
}

@keyframes blink { 50% { border-color:transparent; } }

/* -------------------------------------------------------
   LOADING SPINNER STYLES
   ------------------------------------------------------- */
.loading-spinner {
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 3rem 2rem;
    text-align: center;
    min-height: 200px;
}

.loading-spinner.active {
    display: flex;
}

.duck-spinner {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    background: transparent;
    margin-bottom: 1rem;
}

.loading-text {
    font-size: 1.2rem;
    color: var(--text);
    margin: 0;
    font-weight: 600;
}

.answer.hidden {
    display: none;
}

/* -------------------------------------------------------
   TOP CONTROLS
   ------------------------------------------------------- */
.top-controls{
  position:fixed;top:12px;right:12px;
  display:flex;gap:8px;z-index:1200;
}
.top-controls button{
  display:inline-flex;align-items:center;justify-content:center;
  height:40px;min-width:40px;padding:8px 12px;
  border-radius:10px;
  border:1px solid var(--input-border);
  background:rgba(0,0,0,0.45);
  color:var(--text);cursor:pointer;
  transition:transform .12s;
}
.light .top-controls button{
  background:rgba(255,255,255,0.65);
}
.top-controls button:active{transform:translateY(1px)}

/* -------------------------------------------------------
   CARDS
   ------------------------------------------------------- */
.card{
  background:var(--card);
  border-radius:14px;
  padding:1rem;
  box-shadow:0 12px 36px rgba(0,0,0,0.25);
  backdrop-filter:blur(8px);
  margin-bottom:3.5rem;
}

.answer{
  font-size:1.05rem;
  line-height:1.5;
  white-space:pre-wrap;
  word-break:break-word;
}

/* -------------------------------------------------------
   FLOATING INPUT — SOLID + CLEAR
   ------------------------------------------------------- */
.floating-input{
  position:fixed;left:50%;
  transform:translateX(-50%);
  bottom:clamp(12px, env(safe-area-inset-bottom), 22px);
  display:flex;align-items:center;gap:10px;
  width:min(960px, calc(100% - 36px));
  padding:10px 14px;
  border-radius:999px;

  /* ✔ FIX: fully solid for readability */
  background:rgba(0,0,0,0.85);
  border:1px solid rgba(255,255,255,0.15);

  box-shadow:0 10px 30px rgba(0,0,0,0.25);
  z-index:1150;
}
.light .floating-input{
  background:rgba(255,255,255,0.95);
}

.floating-input.keyboard-open{
  transform:translateX(-50%) translateY(-28%);
}

.floating-input input[type="text"]{
  flex:1;border:0;outline:none;
  padding:12px 16px;
  font-size:1rem;
  background:transparent;color:var(--text);
}
.floating-input input[type="text"]::placeholder{
  color:var(--placeholder);
}

.floating-input input[type="submit"]{
  padding:10px 16px;border-radius:999px;
  border:none;background:var(--button-bg);
  color:#000;font-weight:700;
  cursor:pointer;
}

/* -------------------------------------------------------
   MODAL FIXES
   ------------------------------------------------------- */
.modal-backdrop{
  position:fixed;inset:0;
  display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,0.56);
  z-index:1300;padding:16px;
  backdrop-filter:blur(6px);
}

.modal{
  width:100%;max-width:820px;
  border-radius:12px;padding:22px;
  background:rgba(0,0,0,0.75);
  box-shadow:0 18px 48px rgba(0,0,0,0.5);
  color:var(--text);
}
.light .modal{
  background:rgba(255,255,255,0.92);
}

/* -------------------------------------------------------
   RESPONSIVE
   ------------------------------------------------------- */
@media(min-width:680px){
  .card{padding:1.5rem}
  .floating-input{bottom:26px;padding:12px 16px}
  .site-header h1 {
      min-height: 70px; /* Slightly smaller on desktop */
  }
}

@media(min-width:1024px){
  .floating-input{
    width:min(1100px,70%);
    bottom:34px;
  }
}

/* ----------------------------- */
/* HEADER FIXES                  */
/* ----------------------------- */

.site-header h4 {
  font-size: clamp(1rem, 4vw, 1.6rem);
  font-weight: 600;
  margin: 0;
  opacity: 0.85;
}

/* auto-type — prevent overflow */
.auto-type {
  display: inline-block;
  max-width: 90vw;
  white-space: normal;
  word-break: break-word;
  overflow-wrap: break-word;
}


/* ----------------------------- */
/* FLOATING INPUT FIX            */
/* ----------------------------- */

.floating-input {
  position: fixed;
  bottom: 1.2rem;
  left: 50%;
  transform: translateX(-50%);
  background: var(--card-bg, #fff);
  padding: 0.6rem 0.8rem;
  border-radius: 2rem;
  box-shadow: 0 4px 18px rgba(0,0,0,0.25);
  display: flex;
  gap: 0.6rem;
  z-index: 999;
  width: min(92vw, 520px);
}

.floating-input input[type="text"] {
  flex: 1;
  padding: 0.55rem 1rem;
  border-radius: 1.2rem;
  border: 1px solid var(--border-color, #aaa);
  background: var(--input-bg, #ffffff);
  color: var(--text-color, #000);
}

.floating-input input[type="submit"] {
  padding: 0.55rem 1.1rem;
  border-radius: 1.2rem;
  border: none;
  cursor: pointer;
  background: var(--accent, #4f8bff);
  color: white;
  font-weight: 600;
}

/* When keyboard opens on mobile */
.floating-input.keyboard-open {
  bottom: 0.4rem;
}


/* ----------------------------- */
/* HELP MODAL BUTTONS RESTORED   */
/* ----------------------------- */

.modal-actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.5rem;
}

button.primary,
button.primary-alt,
a.secondary {
  padding: 0.55rem 1.1rem;
  border-radius: 0.6rem;
  font-size: 0.95rem;
  cursor: pointer;
  text-decoration: none;
  text-align: center;
  display: inline-block;
}

/* primary = main CTA */
button.primary {
  background: var(--accent, #4f8bff);
  color: white;
  border: none;
}

/* primary-alt = alternative action */
button.primary-alt {
  background: transparent;
  border: 1px solid var(--accent, #4f8bff);
  color: var(--accent, #4f8bff);
}

/* secondary = link-style button (e.g. bug report) */
a.secondary {
  color: var(--accent, #4f8bff);
  border: none;
}


/* ----------------------------- */
/* DARK MODE SUPPORT             */
/* ----------------------------- */

html.light {
  --card-bg: #fff;
  --input-bg: #fff;
  --text-color: #111;
  --border-color: #bbb;
  --accent: #3a76ff;
}

html:not(.light) {
  --card-bg: #1b1b1b;
  --input-bg: #2a2a2a;
  --text-color: #f3f3f3;
  --border-color: #444;
  --accent: #6ea3ff;
}

/* ================================
   REVERT: restore original floating-input look
   ================================ */

   .floating-input{
    position:fixed;
    left:50%;
    transform:translateX(-50%);
    bottom:clamp(12px, env(safe-area-inset-bottom), 22px);
    display:flex;
    gap:10px;
    align-items:center;
    width:min(960px,calc(100% - 36px));
    max-width:960px;
    padding:10px;
    border-radius:999px;
  
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border:1px solid rgba(255,255,255,0.06);
  
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    z-index:1150;
    transition:transform .12s ease, box-shadow .12s ease;
  }
  
  .floating-input.keyboard-open{ transform:translateX(-50%) translateY(-28%); }
  
  .floating-input input[type="text"]{
    flex:1 1 auto;
    border:0;
    outline:none;
    padding:12px 16px;
    border-radius:999px;
    font-size:1rem;
    background:transparent;
    color:var(--text);
  }
  .floating-input input[type="text"]::placeholder{ color:var(--placeholder) }
  
  .floating-input input[type="submit"]{
    flex:0 0 auto;
    margin-left:6px;
    padding:10px 14px;
    border-radius:999px;
    border:none;
    background:var(--button-bg);
    color:#000;
    font-weight:700;
    cursor:pointer;
  }
  .floating-input input[type="submit"]:active{ transform:translateY(1px) }
  
  .light .floating-input{
    background:rgba(255,255,255,0.6);
    border:1px solid rgba(0,0,0,0.08);
  }